{% extends "base.html" %}
{% block content %}

        <!-- Start of Main -->
        <main class="main">
            <!-- Start of Breadcrumb -->
            <nav class="breadcrumb-nav">
                <div class="container">
                    <ul class="breadcrumb mb-8">
                        <li><a href="{% url 'home' %}">Home</a></li>
                        <li><a href="#">Vendors</a></li>
                        
                    </ul>
                </div>
            </nav>
            <!-- End of Breadcrumb -->

            <!-- Start of Pgae Contetn -->
            <div class="page-content mb-8">
                <div class="container">
                    <div class="row gutter-lg">
                        <aside class="sidebar vendor-sidebar sticky-sidebar-wrapper left-sidebar sidebar-fixed">
                            <div class="sidebar-overlay"></div>
                            <a class="sidebar-close" href="#"><i class="close-icon"></i></a>
                            <a href="#" class="sidebar-toggle"><i class="fas fa-chevron-right"></i></a>
                            <div class="sidebar-content">
                                <div class="sticky-sidebar">
                                    <div class="widget widget-search-form">
                                        <div class="widget-body">
                                            <form action="#" method="GET" class="input-wrapper input-wrapper-inline">
                                                <input type="text" class="form-control" placeholder="Search ..." autocomplete="off" required="">
                                                <button class="btn btn-search"><i class="w-icon-search"></i></button>
                                            </form>
                                        </div>
                                    </div>
                                    <!-- End of Widget -->
                                    
                                    <div class="widget widget-filter">
                                        <h4 class="widget-title">Filter By Category</h4>
                                        <div class="widget-body">
                                            <form class="select-box" method="GET" action="{% url 'vendors-list' %}">
                                                {% csrf_token %}
                                                <select name="category" class="form-control" onchange="this.form.submit()">
                                                    <option value="" {% if not selected_category %}selected{% endif %}>Choose Category...</option>
                                                    <option value="Furniture" {% if selected_category == "Furniture" %}selected{% endif %}>Furniture</option>
                                                    <option value="Fashion" {% if selected_category == "Fashion" %}selected{% endif %}>Fashion</option>
                                                    <option value="Electronics" {% if selected_category == "Electronics" %}selected{% endif %}>Electronics</option>
                                                    <option value="Accessories" {% if selected_category == "Accessories" %}selected{% endif %}>Accessories</option>
                                                    <option value="Kitchen" {% if selected_category == "Kitchen" %}selected{% endif %}>Home & Kitchen</option>
                                                    <option value="Health" {% if selected_category == "Health" %}selected{% endif %}>Healthy & Beauty</option>
                                                    <option value="Toys & Games" {% if selected_category == "Toys & Games" %}selected{% endif %}>Toys & Games</option>
                                                    <option value="Cosmetics" {% if selected_category == "Cosmetics" %}selected{% endif %}>Cosmetics</option>
                                                    <option value="Others" {% if selected_category == "Others" %}selected{% endif %}>Others</option>
                                                </select>
                                                
                                            </form>
                                        </div>
                                    </div>
                                    

                                    <div class="widget widget-filter">
                                        <h4 class="widget-title">Filter By Location</h4>
                                        <div class="widget-body">
                                            
                                            <form class="select-box">
                                                <select name="state" class="form-control mb-3" onchange="this.form.submit()">
                                                    <option value="" {% if not selected_state %}selected{% endif %}>Choose State...</option>
                                                    {% for state in nigerian_states %}
                                                        <option value="{{ state }}" {% if selected_state == state %}selected{% endif %}>{{ state }}</option>
                                                    {% endfor %}
                                                </select>
                                            </form>
                                            
                                        </div>
                                    </div>
                                    <!-- End of Widget -->
                                </div>
                                <!-- End of Sticky Sidebar -->
                            </div>
                            <!-- End of Sidebar Content -->
                        </aside>
                        <!-- End of Sidebar -->
                    <div class="main-content">
                        <div class="row cols-xl-6 cols-lg-5 cols-md-4 cols-sm-3 cols-2">
                            {% for vendor in vendors %}
                            <div class="vendor-brand-wrap mb-8">
                                <div class="vendor-brand">
                                    <a href="{% url 'vendor-store' vendor.slug %}">
                                        <figure class="brand">
                                            <img src="{{vendor.company_logo.url}}" alt="Brand" width="170"
                                                height="170" />
                                        </figure>
                                        
                                        <a href="{% url 'vendor-store' vendor.slug %}"><h4 class="vendor-name">{{vendor.company_name|truncatewords:2}}</h4></a>
                                    </a>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    <div class="toolbox toolbox-pagination justify-content-between">
                               
                                
                        <ul class="pagination">
                            {% if vendors.has_previous %}
                            <li class="prev disabled">
                                <a href="?page={{vendors.previous_page_number}}&category={{ selected_category }}&state={{ selected_state }}" aria-label="Previous" tabindex="-1" aria-disabled="true">
                                    <i class="w-icon-long-arrow-left"></i>Prev
                                </a>
                            </li>
                            {% endif %}
                            {% for page in vendors.paginator.page_range %}
                            <li class="page-item active">
                                <a class="page-link" href="?page={{ page }}&category={{ selected_category }}&state={{ selected_state }}">{{ page }}</a>
                            </li>
                            {% endfor %}
                            {% if vendors.has_next %}
                            <li class="next">
                                <a href="?page={{vendors.next_page_number}}&category={{ selected_category }}&state={{ selected_state }}" aria-label="Next">
                                    Next<i class="w-icon-long-arrow-right"></i>
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
            <!-- End of Page Content -->
        </main>
        <!-- End of Main -->
{% endblock %}